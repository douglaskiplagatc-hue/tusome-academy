{% extends "base.html" %}

{% block title %}Bursaries & Scholarships{% endblock %}

{% block extra_css %}
<style>
.card { border-radius: 16px; box-shadow: 0 6px 20px rgba(0,0,0,.08); }
.kpi-card { border-radius: 18px; color: white; text-align: center; padding: 1.5rem 0; box-shadow: 0 8px 20px rgba(0,0,0,.12); transition: transform .25s ease; }
.kpi-card:hover { transform: translateY(-4px); }
.kpi-value { font-size: 2rem; font-weight: 700; }
.kpi-label { opacity: 0.85; font-size: 0.9rem; }
.table thead { background: #343a40; color: white; }
.table tbody tr:hover { background: #f8f9fa; }
.badge-bursary { background: #cfe2ff; color: #084298; border-radius: 999px; padding: 4px 10px; font-weight: 600; }
.badge-scholarship { background: #d1e7dd; color: #0f5132; border-radius: 999px; padding: 4px 10px; font-weight: 600; }
</style>
{% endblock %}

{% block content %}
<div class="container mt-4">

    <!-- KPI Summary -->
    <div class="row mb-4">
        <div class="col-md-6 mb-3">
            <div class="kpi-card bg-primary">
                <div class="kpi-value">KES {{ bursaries | sum(attribute='amount') | round(2) }}</div>
                <div class="kpi-label"><i class="fas fa-hand-holding-usd me-1"></i>Total Bursaries</div>
            </div>
        </div>
        <div class="col-md-6 mb-3">
            <div class="kpi-card bg-success">
                <div class="kpi-value">KES {{ scholarships | sum(attribute='amount') | round(2) }}</div>
                <div class="kpi-label"><i class="fas fa-graduation-cap me-1"></i>Total Scholarships</div>
            </div>
        </div>
    </div>

    <!-- Bursaries Table -->
    <div class="card mb-4">
        <div class="card-header bg-dark text-white">
            <h5 class="mb-0"><i class="fas fa-hand-holding-usd me-2"></i>Bursaries</h5>
        </div>
        <div class="table-responsive">
            <table class="table table-striped table-hover mb-0">
                <thead>
                    <tr>
                        <th>Student</th>
                        <th>Amount</th>
                        <th>Term</th>
                        <th>Year</th>
                    </tr>
                </thead>
                <tbody>
                    {% for b in bursaries %}
                        <tr>
                            <td>{{ b.student.full_name }}</td>
                            <td>KES {{ b.amount | round(2) }}</td>
                            <td>{{ b.term }}</td>
                            <td>{{ b.year }}</td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="4" class="text-center text-muted py-3">No bursary records found.</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Scholarships Table -->
    <div class="card">
        <div class="card-header bg-dark text-white">
            <h5 class="mb-0"><i class="fas fa-graduation-cap me-2"></i>Scholarships</h5>
        </div>
        <div class="table-responsive">
            <table class="table table-striped table-hover mb-0">
                <thead>
                    <tr>
                        <th>Student</th>
                        <th>Amount</th>
                        <th>Term</th>
                        <th>Year</th>
                    </tr>
                </thead>
                <tbody>
                    {% for s in scholarships %}
                        <tr>
                            <td>{{ s.student.full_name }}</td>
                            <td>KES {{ s.amount | round(2) }}</td>
                            <td>{{ s.term }}</td>
                            <td>{{ s.year }}</td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="4" class="text-center text-muted py-3">No scholarship records found.</td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

</div>
{% endblock %}